## 02-03 개발환경 세팅하기

### firebase 설치

```sh
# macos
sudo su

# firebase-tools 설치(global)
npm i -g firebase-tools

# version 확인
firebase -V
```

### firebase 설정

```sh
# VSCode 터미널
cd class101-web-clone_sns

# firebase 로그인(bigwhitekmc@gmail.com)
firebase login

# 로그아웃: firebase logout

# vscode 터미널
firebase init

# Realtime Database, Functions, Hosting, Storage, Emulators 선택

=== Project Setup
# Use an existing project
# - onstagram-class101 (onstagram-class101)

=== Database Setup
database.rules.json

=== Functions Setup
Javascript
? What language would you like to use to write Cloud Functions? JavaScript
? Do you want to use ESLint to catch probable bugs and enforce style? N
? Do you want to install dependencies with npm now? (Y/n) y

=== Hosting Setup
? What do you want to use as your public directory? (public)
? Configure as a single-page app (rewrite all urls to /index.html)? (y/N) y
? Set up automatic builds and deploys with GitHub? (y/N) n

=== Storage Setup
? What file should be used for Storage Rules? (storage.rules)

=== Emulators Setup
>(*) Functions Emulator

? Which port do you want to use for the functions emulator? (5001)
? Would you like to enable the Emulator UI? (Y/n) n
? Would you like to download the emulators now? (Y/n)
```

### 프로젝트 기본 파일 복사/설치

- Downloads/basic.zip => /public/basic.zip
- 압축 해제

```sh
cd class101-web-clone_sns/public/client
npm i
```

### React 설정

```sh
cd class101-web-clone_sns/public/client
npm run-script build
```

> 에러 발생시(windows)

```
set NODE_OPTIONS=--openssl-legacy-provider && npm run build
```

### firebase.json 수정

> 수정전

```
  "hosting": {
    "public": "public",
```

> 수정후

```
  "hosting": {
    "public": "public/client/build",
```

### firebase 호스팅

```sh
firebase deploy —only hosting
```

> 배포 url과 성공 메시지 등이 표시되지 않는 경우
> firebase deploy --only hosting --debug

"""
https://onstagram-class101.web.app/
"""

## 참고

### Build Error

"""

> client@0.1.0 build
> node scripts/build.js
> Creating an optimized production build...
> Error: error:0308010C:digital envelope routines::unsupported

    at new Hash (node:internal/crypto/hash:80:19)
    at Object.createHash (node:crypto:139:10)
    at module.exports (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\webpack\lib\util\createHash.js:135:53)
    at NormalModule._initBuildHash (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\webpack\lib\NormalModule.js:417:16)
    at handleParseError (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\webpack\lib\NormalModule.js:471:10)
    at C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\webpack\lib\NormalModule.js:503:5
    at C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\webpack\lib\NormalModule.js:358:12
    at C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\loader-runner\lib\LoaderRunner.js:373:3
    at iterateNormalLoaders (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\loader-runner\lib\LoaderRunner.js:214:10)
    at iterateNormalLoaders (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\loader-runner\lib\LoaderRunner.js:221:10)

ner.js:233:18
at context.callback (C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\loader-runner\lib\LoaderRunner.js:111:13)
at C:\JnJ-soft\Learnings\class-101\class101-web-clone_sns\public\client\node_modules\babel-loader\lib\index.js:55:103 {
opensslErrorStack: [
'error:03000086:digital envelope routines::initialization error',
'error:0308010C:digital envelope routines::unsupported'
],
library: 'digital envelope routines',
reason: 'unsupported',
code: 'ERR_OSSL_EVP_UNSUPPORTED'
}
Node.js v20.12.0
"""

#### claude.ai

"""
죄송합니다. 한글로 답변 드리겠습니다.
이 오류는 Node.js의 crypto 모듈 변경, 특히 OpenSSL과 관련된 문제입니다. 이는 주로 새로운 버전의 Node.js에서 오래된 프로젝트나 종속성을 사용할 때 발생합니다.
다음과 같은 해결 방법들을 시도해 볼 수 있습니다:

Node.js 버전 다운그레이드:
현재 Node.js v20.12.0을 사용 중이신데, 이는 매우 최신 버전입니다. Node.js 18.x와 같은 LTS(장기 지원) 버전을 사용해 보세요. 이 버전이 프로젝트의 종속성과 더 호환될 수 있습니다.
환경 변수 설정:
레거시 OpenSSL 공급자를 사용하도록 임시로 환경 변수를 설정할 수 있습니다. 빌드 명령을 다음과 같이 실행해 보세요:

```

set NODE_OPTIONS=--openssl-legacy-provider && npm run build

```

Unix 기반 시스템(Linux, macOS)의 경우:

```

export NODE_OPTIONS=--openssl-legacy-provider && npm run build

```

프로젝트 종속성 업데이트:
가능하다면 프로젝트의 종속성, 특히 webpack 및 관련 패키지를 최신 버전으로 업데이트해 보세요. 이를 통해 새로운 Node.js 버전과의 호환성 문제를 해결할 수 있습니다.
충돌하는 종속성 확인:
프로젝트에 crypto 관련 패키지의 충돌하는 버전이 없는지 확인하세요.
npm 캐시 삭제 및 종속성 재설치:
때로는 npm 캐시를 지우고 종속성을 재설치하는 것이 도움이 될 수 있습니다:
Copynpm cache clean --force
rm -rf node_modules
npm install

가장 쉬운 방법(환경 변수 설정)부터 시작하여 순서대로 이러한 해결책들을 시도해 보세요. 문제가 계속된다면 프로젝트의 webpack 구성을 검토하거나 사용 중인 특정 패키지의 문서를 참조해야 할 수 있습니다.
"""

```

```
